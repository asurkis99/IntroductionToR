---
title: "Introduction to R"
author: "Alisa Surkis"
date: "4/16/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, error=TRUE)
```

This document will provide the commands needed to catch you up at the beginning of each section of the Introduction to R class. If at any point, you find that you are not getting the correct outputs, you can use these code chunks to get back on track with the class (and then sort out what went wrong later!).

#### On track for section 2 Processing and Working with Data
If you do not have a variable called master with 18589 observations and 24 variables in the global environment, run the following code:  
```{r}
master <- read.csv(file = "master.csv")
```

#### On track for section 2.1 Subsetting
If you do not have the variables master (18589 observations, 24 variables) and batting (99846 observations, 22 variables) in the global environment, run the following code: 
```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
```

#### On track for section 2.2-2.3	(Renaming Variables - Installing and Working with Packages)
If you do not have the variables master (18589 observations, 24 variables), batting (99846 observations, 22 variables), and batting2014 (1435 observations, 22 variables) in the global environment, run the following code:  
```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
```

#### On track for section 2.3	Installing and Working with Packages
If you do not have the variables master (18589 observations, 24 variables), batting (99846 observations, 22 variables), and batting2014 (1435 observations, 22 variables) in the global environment, and if runs is not one of the variables in batting2014, run the following code:  
```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
```

#### On track for section 2.4	Merging Datasets
If you do not have the variables master (18589 observations, 24 variables), batting (99846 observations, 22 variables), and batting2014 (1435 observations, 22 variables) in the global environment, and if runs is not one of the variables in batting2014, run the following code:  
```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
library(plyr)
batting2014  <-  rename(batting2014,  c(AB="at_bats", H="hits", X2B="doubles"))
```

#### On track for section 2.5	Recoding Data, Creating New Variables, and Changing Data Types

```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
library(plyr)
batting2014  <-  rename(batting2014,  c(AB="at_bats", H="hits", X2B="doubles"))
full_data  <-  merge(batting2014, master, by = "playerID")
```

#### On track for section 2.6	Dealing with NAs

```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
library(plyr)
batting2014  <-  rename(batting2014,  c(AB="at_bats", H="hits", X2B="doubles"))
full_data  <-  merge(batting2014, master, by = "playerID")
full_data$birthState  <-  revalue(full_data$birthState,  c(TX="Texas", CA="California"))
full_data$rel_height[full_data$height  <  70] <- "short"
full_data$rel_height[full_data$height >= 70 & full_data$height <= 75] <- "average"
full_data$rel_height[full_data$height > 75] <- "tall"
full_data$rel_height <- as.factor(full_data$rel_height)
full_data$rel_height <- factor(full_data$rel_height,levels= c("short","average","tall"))
full_data$wt_kg <- full_data$weight * 0.453592
```

#### On track for sections 2.6-4.2 Dealing with NAs through Transforming and Summarizing Data

```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
library(plyr)
batting2014  <-  rename(batting2014,  c(AB="at_bats", H="hits", X2B="doubles"))
full_data  <-  merge(batting2014, master, by = "playerID")
full_data$birthState  <-  revalue(full_data$birthState,  c(TX="Texas", CA="California"))
full_data$rel_height[full_data$height  <  70] <- "short"
full_data$rel_height[full_data$height >= 70 & full_data$height <= 75] <- "average"
full_data$rel_height[full_data$height > 75] <- "tall"
full_data$rel_height <- as.factor(full_data$rel_height)
full_data$rel_height <- factor(full_data$rel_height,levels= c("short","average","tall"))
full_data$wt_kg <- full_data$weight * 0.453592
```

#### On track for section 4.3	Reshaping Data from Long to Wide

```{r}
master <- read.csv(file = "master.csv")
batting <- read.csv(file = "batting.csv")
batting2014 <- subset(batting,  yearID >= 2014)
names(batting2014)[names(batting2014) == "R"]  <- "runs"
library(plyr)
batting2014  <-  rename(batting2014,  c(AB="at_bats", H="hits", X2B="doubles"))
full_data  <-  merge(batting2014, master, by = "playerID")
full_data$birthState  <-  revalue(full_data$birthState,  c(TX="Texas", CA="California"))
full_data$rel_height[full_data$height  <  70] <- "short"
full_data$rel_height[full_data$height >= 70 & full_data$height <= 75] <- "average"
full_data$rel_height[full_data$height > 75] <- "tall"
full_data$rel_height <- as.factor(full_data$rel_height)
full_data$rel_height <- factor(full_data$rel_height,levels= c("short","average","tall"))
full_data$wt_kg <- full_data$weight * 0.453592
team_summary <- ddply(batting, c("teamID", "yearID"), summarize, total_homeruns  =  sum(HR,  na.rm  =  TRUE),  total_runs  =  sum(R, na.rm  =  TRUE),  mean_homeruns  =  mean(HR,  na.rm  =  TRUE), mean_runs = mean(R, na.rm = TRUE))
```

